<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุงููุงุดูุฑ - ULTRA_POS (v2.0.4 - Activated)</title>
    <link rel="stylesheet" href="styles.css">
    <script src="assets/js/chart.js"></script>
</head>

<body>


    <!-- SPLASH SCREEN -->
    <div id="splash-screen">
        <div class="splash-content">
            <img id="splash-logo" src="" alt="Logo" class="splash-logo-img">
            <h1>ุจุฑูุงูุฌ ุงููุงุดูุฑ ุงูุฐูู</h1>
            <div class="loader-container">
                <div class="loader-bar"></div>
            </div>
            <p class="loading-text">ุฌุงุฑู ุงูุชุญููู...</p>
        </div>
    </div>

    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="hidden">
        <div class="login-container">
            <div class="login-header-text">
                <img id="login-store-logo" src="" alt="Store Logo" class="login-logo">
                <h1 id="login-store-display" class="store-title">...</h1>
            </div>

            <div class="login-box">
                <div class="input-group">
                    <label>ุงุณู ุงููุณุชุฎุฏู</label>
                    <input type="text" id="login-username" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู">
                </div>
                <div class="input-group">
                    <label>ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="login-password" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                </div>

                <div class="remember-row">
                    <input type="checkbox" id="remember-me">
                    <label for="remember-me">ุชุฐูุฑ ุจูุงูุงุช ุงูุฏุฎูู</label>
                </div>

                <button id="btn-login">ุชุณุฌูู ุงูุฏุฎูู</button>
                <p id="login-error"></p>
            </div>

            <div class="login-footer-text">
                ูุน ุชุญูุงุช ุดุฑูุฉ ุณูุจุฑ ููุฏ &copy; ุฌููุน ุงูุญููู ูุญููุธุฉ 2026
            </div>
        </div>
    </div>

    <!-- MAIN APPLICATION -->
    <div id="main-app" class="hidden">

        <!-- SIDEBAR -->
        <div class="sidebar">
            <h3>ULTRA_POS</h3>
            <button id="nav-pos-btn" class="nav-btn active" onclick="showSection('pos-section')">ููุทุฉ ุงูุจูุน</button>
            <button id="nav-products-btn" class="nav-btn" onclick="showSection('products-section')">ุงูููุชุฌุงุช</button>
            <button id="nav-customers-btn" class="nav-btn" onclick="showSection('customers-section')">ุงูุนููุงุก</button>
            <button id="nav-reports-btn" class="nav-btn" onclick="showSection('reports-section')">ุงูุชูุงุฑูุฑ</button>
            <button id="nav-users-btn" class="nav-btn admin-only hidden"
                onclick="showSection('users-section')">ุงููุณุชุฎุฏููู</button>
            <button id="nav-settings-btn" class="nav-btn admin-only hidden"
                onclick="showSection('settings-section')">ุงูุฅุนุฏุงุฏุงุช</button>

            <div style="margin-top: auto; display:flex; justify-content:center;">
                <button class="nav-btn logout-btn" onclick="logout()"
                    style="width:80%; justify-content:center;">ุฎุฑูุฌ</button>
            </div>
        </div>

        <!-- CONTENT -->
        <div class="content">

            <!-- POS SECTION -->
            <div id="pos-section" class="section">
                <div class="pos-container">

                    <!-- Column 1: Categories -->
                    <div class="pos-categories-sidebar">
                        <div class="pos-cat-header">ุงููุฆุงุช</div>
                        <div class="pos-cat-list" id="pos-categories">
                            <!-- Dynamic Categories -->
                        </div>
                    </div>

                    <!-- Column 2: Products -->
                    <div class="product-catalog">
                        <!-- Smart Search System -->
                        <div class="smart-search-wrapper">
                            <div class="smart-search-container">
                                <input type="text" id="pos-search-input"
                                    placeholder="๐ ุงุจุญุซ ุนู ููุชุฌ... (ุงูุชุจ *ูููุฉ ููุฅุถุงูุฉ ุงูุณุฑูุนุฉ)" autocomplete="off">
                                <span class="search-shortcut" title="Ctrl+F ููุชุฑููุฒ ุงูุณุฑูุน">โจ๏ธ</span>
                            </div>

                            <!-- ุงููุงุฆูุฉ ุงูููุณุฏูุฉ -->
                            <div id="search-dropdown" class="search-dropdown hidden">
                                <!-- ูุณู ุงูุงูุชุฑุงุญุงุช ุงูุณุฑูุนุฉ (ุนูุฏ ูุชุญ ุงูุจุญุซ ูุงุฑุบุงู) -->
                                <div id="search-quick-access" class="search-quick-access">
                                    <div class="quick-section">
                                        <div class="section-title">๐ฅ ุงูุฃูุซุฑ ูุจูุนุงู</div>
                                        <div id="top-selling-items" class="quick-items"></div>
                                    </div>
                                    <div class="quick-section">
                                        <div class="section-title">๐ ุขุฎุฑ ุงููุณุชุฎุฏูุฉ</div>
                                        <div id="recent-items" class="quick-items"></div>
                                    </div>
                                </div>

                                <!-- ูุชุงุฆุฌ ุงูุจุญุซ -->
                                <div id="search-results" class="search-results hidden"></div>

                                <!-- ุดุฑูุท ุงููุณุงุนุฏุฉ -->
                                <div class="search-help">
                                    <span>โโ ุชููู</span>
                                    <span>Enter ุฅุถุงูุฉ</span>
                                    <span>Tab ูููุฉ</span>
                                    <span>Esc ุฅุบูุงู</span>
                                    <span>#ูุฆุฉ</span>
                                    <span>ููุชุฌ*5</span>
                                </div>
                            </div>
                        </div>

                        <div class="products-grid" id="pos-products">
                            <!-- Dynamic Products -->
                        </div>
                    </div>

                    <!-- Column 3: Cart -->
                    <div class="cart-panel">
                        <div class="cart-header">ุณูุฉ ุงููุดุชุฑูุงุช</div>

                        <!-- Items List -->
                        <div class="cart-items" id="cart-items"></div>

                        <!-- Footer Controls -->
                        <div class="cart-footer">

                            <!-- Customer Select -->
                            <div class="customer-select-row" style="margin-bottom:10px;">
                                <select id="pos-customer"
                                    style="width:100%; padding:8px; border-radius:4px; border:1px solid #ddd;">
                                    <option value="1">ุนููู ููุฏู</option>
                                </select>
                            </div>

                            <!-- Payment Toggles -->
                            <div class="payment-toggles">
                                <button class="pay-toggle active" id="pay-cash"
                                    onclick="setPaymentMethod('cash')">ููุฏ</button>
                                <button class="pay-toggle" id="pay-card"
                                    onclick="setPaymentMethod('card')">ุจุทุงูุฉ</button>
                                <button class="pay-toggle" id="pay-credit"
                                    onclick="setPaymentMethod('credit')">ุขุฌู</button>
                                <input type="hidden" id="pos-payment" value="cash">
                            </div>

                            <!-- Totals -->
                            <div class="net-total-row">
                                <span>ุงููุฌููุน:</span>
                                <span id="cart-net-total">0.00</span>
                            </div>

                            <!-- Action Buttons Row 1 -->
                            <div style="display:flex; gap:5px; margin-top:10px;">
                                <button onclick="openSplitPayment()"
                                    style="flex:1; background:#3498db; border:none; color:white; padding:8px; border-radius:4px; font-size:12px;">๐ณ
                                    ุชูุณูู</button>
                                <button onclick="openReturnModal()"
                                    style="flex:1; background:#e74c3c; border:none; color:white; padding:8px; border-radius:4px; font-size:12px;">โฉ๏ธ
                                    ูุฑุชุฌุน</button>
                            </div>

                            <!-- Action Buttons Row 2 -->
                            <div style="display:flex; gap:5px; margin-top:5px;">
                                <button class="hold-btn" onclick="holdCart()"
                                    style="flex:1; background:#f39c12; border:none; color:white; padding:10px; border-radius:4px; font-weight:bold;">ุชุนููู</button>
                                <button class="resume-btn" onclick="showHeldCarts()"
                                    style="flex:1; background:#8e44ad; border:none; color:white; padding:10px; border-radius:4px; font-weight:bold;">ุงุณุชุนุงุฏุฉ
                                    (<span id="held-count">0</span>)</button>
                            </div>

                            <button class="checkout-btn" onclick="checkout()">ุฏูุน ูุทุจุงุนุฉ</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PRODUCTS MANAGEMENT SECTION -->
            <div id="products-section" class="section hidden">
                <h2 style="margin-bottom:15px;">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</h2>
                <div class="pm-container">

                    <!-- Categories Sidebar -->
                    <div class="pm-categories">
                        <div class="pm-cat-header"
                            style="display:flex; justify-content:space-between; align-items:center;">
                            <span>ุงููุฆุงุช</span>
                            <button
                                style="width:auto; font-size:12px; background:var(--success-color); padding:4px 8px;"
                                onclick="openCategoryModal()">+ ุฅุถุงูุฉ</button>
                        </div>
                        <div class="pm-cat-list" id="pm-cat-list">
                            <!-- Dynamic Categories List -->
                        </div>
                    </div>

                    <!-- Products Table Area -->
                    <div class="pm-products">
                        <div class="pm-prod-header"
                            style="display:flex; justify-content:space-between; align-items:center;">
                            <span id="pm-selected-cat-name">ูู ุงูููุชุฌุงุช</span>
                            <div style="display:flex; gap:8px;">
                                <button style="width:auto; padding:8px 15px; background:var(--success-color);"
                                    onclick="openImportModal()">๐ฅ ุงุณุชูุฑุงุฏ Excel</button>
                                <button style="width:auto; background:var(--success-color); padding:8px 15px;"
                                    onclick="openProductModal()">+ ุฅุถุงูุฉ ููุชุฌ</button>
                            </div>
                        </div>

                        <!-- Search & Filters Bar -->
                        <div class="pm-search-bar">
                            <div class="pm-search-row">
                                <div class="pm-search-input-wrapper">
                                    <input type="text" id="pm-search-input" placeholder="๐ ุงุจุญุซ ุจุงูุงุณู ุฃู ุงูุจุงุฑููุฏ..."
                                        autocomplete="off">
                                </div>
                                <div class="pm-filters-toggle" onclick="toggleProductFilters()">
                                    <span>๐ ููุงุชุฑ</span>
                                    <span id="pm-filters-arrow">โผ</span>
                                </div>
                                <button class="pm-reset-btn" onclick="resetProductFilters()"
                                    title="ุฅุนุงุฏุฉ ุถุจุท">๐</button>
                            </div>

                            <!-- Filters Panel -->
                            <div id="pm-filters-panel" class="pm-filters-panel hidden">
                                <div class="pm-filter-group">
                                    <label>ุงููุฎุฒูู:</label>
                                    <select id="pm-filter-stock">
                                        <option value="all">ุงููู</option>
                                        <option value="available">ูุชููุฑ</option>
                                        <option value="low">ููุฎูุถ โ๏ธ</option>
                                        <option value="zero">ููุฐ โ</option>
                                    </select>
                                </div>
                                <div class="pm-filter-group">
                                    <label>ุงูุณุนุฑ ูู:</label>
                                    <input type="number" id="pm-filter-price-min" placeholder="0" min="0">
                                </div>
                                <div class="pm-filter-group">
                                    <label>ุฅูู:</label>
                                    <input type="number" id="pm-filter-price-max" placeholder="โ" min="0">
                                </div>
                                <div class="pm-filter-group">
                                    <label>ุงูุชุฑุชูุจ:</label>
                                    <select id="pm-filter-sort">
                                        <option value="name-asc">ุงูุงุณู (ุฃ-ู)</option>
                                        <option value="name-desc">ุงูุงุณู (ู-ุฃ)</option>
                                        <option value="price-asc">ุงูุณุนุฑ (ุงูุฃูู)</option>
                                        <option value="price-desc">ุงูุณุนุฑ (ุงูุฃุนูู)</option>
                                        <option value="stock-asc">ุงููุฎุฒูู (ุงูุฃูู)</option>
                                        <option value="stock-desc">ุงููุฎุฒูู (ุงูุฃูุซุฑ)</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Results Counter -->
                            <div class="pm-results-counter">
                                <span>๐ฆ ุงููุชุงุฆุฌ: <strong id="pm-results-count">0</strong> ููุชุฌ</span>
                            </div>
                        </div>

                        <div class="pm-prod-table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ุงูุตูุฑุฉ</th>
                                        <th>ุงูุจุงุฑููุฏ</th>
                                        <th>ุงูุงุณู</th>
                                        <th>ุงูุณุนุฑ</th>
                                        <th>ุงูุชูููุฉ</th>
                                        <th>ุงููุฎุฒูู</th>
                                        <th>ุฅุฌุฑุงุกุงุช</th>
                                    </tr>
                                </thead>
                                <tbody id="products-table-body">
                                    <!-- Dynamic -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>

            <!-- CUSTOMERS SECTION -->
            <div id="customers-section" class="section hidden">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <h2>๐ฅ ุฅุฏุงุฑุฉ ุงูุนููุงุก</h2>
                    <div style="display:flex; gap:10px; align-items:center;">
                        <input type="text" id="customer-search" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงููุงุชู..."
                            onkeyup="filterCustomers()" style="width:200px;">
                        <select id="customer-filter-credit" onchange="filterCustomers()" style="width:auto;">
                            <option value="all">ุงููู</option>
                            <option value="credit">ุงูุณูุงุญ ุจุงูุขุฌู</option>
                            <option value="no-credit">ููุฏู ููุท</option>
                        </select>
                        <select id="customer-filter-balance" onchange="filterCustomers()" style="width:auto;">
                            <option value="all">ูู ุงูุฃุฑุตุฏุฉ</option>
                            <option value="has-balance">ูุฏูู ุฑุตูุฏ ูุณุชุญู</option>
                            <option value="no-balance">ุฑุตูุฏ ุตูุฑ</option>
                        </select>
                        <button onclick="openCustomerModal()" style="background:var(--success-color);">+ ุฅุถุงูุฉ
                            ุนููู</button>
                    </div>
                </div>

                <div class="table-container" style="background:white; border-radius:8px; padding:15px;">
                    <table>
                        <thead>
                            <tr>
                                <th>ุงูุงุณู</th>
                                <th>ุงููุงุชู</th>
                                <th>ุญุฏ ุงูุงุฆุชูุงู</th>
                                <th>ุงูุฑุตูุฏ ุงููุณุชุญู</th>
                                <th>ุงูุณูุงุญ ุจุงูุขุฌู</th>
                                <th>ุนุฏุฏ ุงูููุงุชูุฑ</th>
                                <th>ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="customers-table-body">
                            <!-- Dynamic -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- REPORTS SECTION -->
            <div id="reports-section" class="section hidden">

                <!-- Reports Container with Sidebar -->
                <div class="reports-main-container">

                    <!-- Sidebar Navigation -->
                    <div class="reports-sidebar">
                        <div class="reports-sidebar-header">๐ ุงูุชูุงุฑูุฑ</div>
                        <button class="report-nav-btn active" onclick="switchReportSection('dashboard')"
                            id="rpt-nav-dashboard">
                            <span class="report-nav-icon">๐</span>
                            <span>ููุญุฉ ุงูุชุญูู</span>
                        </button>
                        <button class="report-nav-btn" onclick="switchReportSection('sales')" id="rpt-nav-sales">
                            <span class="report-nav-icon">๐ฐ</span>
                            <span>ุชูุงุฑูุฑ ุงููุจูุนุงุช</span>
                        </button>
                        <button class="report-nav-btn" onclick="switchReportSection('payments')" id="rpt-nav-payments">
                            <span class="report-nav-icon">๐ณ</span>
                            <span>ุทุฑู ุงูุฏูุน</span>
                        </button>
                        <button class="report-nav-btn" onclick="switchReportSection('returns')" id="rpt-nav-returns">
                            <span class="report-nav-icon">โฉ๏ธ</span>
                            <span>ุงููุฑุชุฌุนุงุช</span>
                        </button>
                        <button class="report-nav-btn" onclick="switchReportSection('customers')"
                            id="rpt-nav-customers">
                            <span class="report-nav-icon">๐ฅ</span>
                            <span>ุงูุนููุงุก ูุงูุฏููู</span>
                        </button>
                        <button class="report-nav-btn" onclick="switchReportSection('cashiers')" id="rpt-nav-cashiers">
                            <span class="report-nav-icon">๐ค</span>
                            <span>ุงููุงุดูุฑ</span>
                        </button>
                        <button class="report-nav-btn" onclick="switchReportSection('inventory')"
                            id="rpt-nav-inventory">
                            <span class="report-nav-icon">๐ฆ</span>
                            <span>ุงููุฎุฒูู</span>
                        </button>

                        <!-- Day Closing Button -->
                        <div class="day-closing-sidebar">
                            <button class="day-closing-btn" onclick="openDayClosingModal()">
                                โญ ุฅููุงู ุงูููู
                            </button>
                        </div>
                    </div>

                    <!-- Main Content Area -->
                    <div class="reports-content">

                        <!-- Header with Filters -->
                        <div class="reports-header">
                            <div class="reports-date-filters">
                                <button class="quick-date-btn active" onclick="setReportDate('today')"
                                    id="date-btn-today">ุงูููู</button>
                                <button class="quick-date-btn" onclick="setReportDate('yesterday')"
                                    id="date-btn-yesterday">ุฃูุณ</button>
                                <button class="quick-date-btn" onclick="setReportDate('week')"
                                    id="date-btn-week">ุงูุฃุณุจูุน</button>
                                <button class="quick-date-btn" onclick="setReportDate('month')"
                                    id="date-btn-month">ุงูุดูุฑ</button>
                                <div class="custom-date-range">
                                    <input type="date" id="report-from">
                                    <span>-</span>
                                    <input type="date" id="report-to">
                                    <button onclick="loadReportData()" class="refresh-btn">๐</button>
                                </div>
                            </div>
                            <div class="reports-actions">
                                <select id="report-cashier" class="report-filter-select">
                                    <option value="all">ูู ุงููุงุดูุฑ</option>
                                </select>
                                <select id="report-payment" class="report-filter-select">
                                    <option value="all">ูู ุทุฑู ุงูุฏูุน</option>
                                    <option value="cash">ููุฏ</option>
                                    <option value="card">ุจุทุงูุฉ</option>
                                    <option value="credit">ุขุฌู</option>
                                </select>
                            </div>
                        </div>

                        <!-- Dashboard View -->
                        <div id="report-view-dashboard" class="report-view">

                            <!-- KPI Cards Row 1: Main Stats -->
                            <div class="kpi-grid">
                                <div class="kpi-card kpi-sales">
                                    <div class="kpi-icon">๐ฐ</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ุฅุฌูุงูู ุงููุจูุนุงุช</span>
                                        <span class="kpi-value" id="kpi-total-sales">0.00</span>
                                    </div>
                                </div>
                                <div class="kpi-card kpi-invoices">
                                    <div class="kpi-icon">๐งพ</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ุนุฏุฏ ุงูููุงุชูุฑ</span>
                                        <span class="kpi-value" id="kpi-invoice-count">0</span>
                                    </div>
                                </div>
                                <div class="kpi-card kpi-items">
                                    <div class="kpi-icon">๐</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ุงูุฃุตูุงู ุงููุจุงุนุฉ</span>
                                        <span class="kpi-value" id="kpi-items-sold">0</span>
                                    </div>
                                </div>
                                <div class="kpi-card kpi-returns">
                                    <div class="kpi-icon">โฉ๏ธ</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ุงููุฑุชุฌุนุงุช</span>
                                        <span class="kpi-value" id="kpi-returns">0.00</span>
                                    </div>
                                </div>
                            </div>

                            <!-- KPI Cards Row 2: Payment Methods (4 columns) -->
                            <div class="kpi-grid kpi-grid-4">
                                <div class="kpi-card kpi-cash">
                                    <div class="kpi-icon">๐ต</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ุงูููุฏ (ูุงุด)</span>
                                        <span class="kpi-value" id="kpi-cash">0.00</span>
                                    </div>
                                </div>
                                <div class="kpi-card kpi-card-pay">
                                    <div class="kpi-icon">๐ณ</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ุงูุจุทุงูุฉ</span>
                                        <span class="kpi-value" id="kpi-card">0.00</span>
                                    </div>
                                </div>
                                <div class="kpi-card kpi-credit">
                                    <div class="kpi-icon">๐</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ุงูุขุฌู</span>
                                        <span class="kpi-value" id="kpi-credit">0.00</span>
                                    </div>
                                </div>
                                <div class="kpi-card kpi-split">
                                    <div class="kpi-icon">๐</div>
                                    <div class="kpi-content">
                                        <span class="kpi-label">ููุณู</span>
                                        <span class="kpi-value" id="kpi-split">0.00</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Charts Row -->
                            <div class="charts-row">
                                <div class="chart-container chart-large">
                                    <h4>๐ ุงุชุฌุงู ุงููุจูุนุงุช</h4>
                                    <canvas id="salesChart"></canvas>
                                </div>
                                <div class="chart-container chart-small">
                                    <h4>๐ ุงููุจูุนุงุช ุญุณุจ ุงููุฆุฉ</h4>
                                    <canvas id="categoryChart"></canvas>
                                </div>
                            </div>

                            <!-- Insights Row -->
                            <div class="insights-row">
                                <div class="insight-card">
                                    <h4>๐ ุฃูุถู ูุงุดูุฑ</h4>
                                    <div class="insight-value" id="top-cashier-name">-</div>
                                    <div class="insight-sub" id="top-cashier-amount">0.00</div>
                                </div>
                                <div class="insight-card insight-wide">
                                    <h4>โญ ุฃูุถู 5 ููุชุฌุงุช</h4>
                                    <table class="insight-table">
                                        <thead>
                                            <tr>
                                                <th>ุงูููุชุฌ</th>
                                                <th>ุงููููุฉ</th>
                                                <th>ุงูุฅูุฑุงุฏ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="top-products-body"></tbody>
                                    </table>
                                </div>
                            </div>

                        </div>

                        <!-- Sales Reports View -->
                        <div id="report-view-sales" class="report-view hidden">
                            <div class="report-header-bar">
                                <div class="report-sub-tabs">
                                    <button class="sub-tab-btn active"
                                        onclick="loadSalesSubReport('invoices')">ุงูููุงุชูุฑ</button>
                                    <button class="sub-tab-btn" onclick="loadSalesSubReport('products')">ุญุณุจ
                                        ุงูุตูู</button>
                                    <button class="sub-tab-btn" onclick="loadSalesSubReport('categories')">ุญุณุจ
                                        ุงููุฆุฉ</button>
                                </div>
                                <div class="report-export-bar">
                                    <button onclick="exportCurrentReport('csv')" class="export-btn">๐ฅ CSV</button>
                                    <button onclick="exportCurrentReport('excel')" class="export-btn">๐ Excel</button>
                                </div>
                            </div>
                            <div class="report-table-container" id="sales-report-content">
                                <!-- Dynamic Content -->
                            </div>
                        </div>

                        <!-- Payment Methods View -->
                        <div id="report-view-payments" class="report-view hidden">
                            <div class="report-header-bar">
                                <div></div>
                                <div class="report-export-bar">
                                    <button onclick="exportCurrentReport('csv')" class="export-btn">๐ฅ CSV</button>
                                    <button onclick="exportCurrentReport('excel')" class="export-btn">๐ Excel</button>
                                </div>
                            </div>
                            <div class="report-table-container" id="payments-report-content">
                                <!-- Dynamic Content -->
                            </div>
                        </div>

                        <!-- Returns View -->
                        <div id="report-view-returns" class="report-view hidden">
                            <div class="report-header-bar">
                                <div></div>
                                <div class="report-export-bar">
                                    <button onclick="exportCurrentReport('csv')" class="export-btn">๐ฅ CSV</button>
                                    <button onclick="exportCurrentReport('excel')" class="export-btn">๐ Excel</button>
                                </div>
                            </div>
                            <div class="report-table-container" id="returns-report-content">
                                <!-- Dynamic Content -->
                            </div>
                        </div>

                        <!-- Customers View -->
                        <div id="report-view-customers" class="report-view hidden">
                            <div class="report-header-bar">
                                <div></div>
                                <div class="report-export-bar">
                                    <button onclick="exportCurrentReport('csv')" class="export-btn">๐ฅ CSV</button>
                                    <button onclick="exportCurrentReport('excel')" class="export-btn">๐ Excel</button>
                                </div>
                            </div>
                            <div class="report-table-container" id="customers-report-content">
                                <!-- Dynamic Content -->
                            </div>
                        </div>

                        <!-- Cashiers View -->
                        <div id="report-view-cashiers" class="report-view hidden">
                            <div class="report-header-bar">
                                <div></div>
                                <div class="report-export-bar">
                                    <button onclick="exportCurrentReport('csv')" class="export-btn">๐ฅ CSV</button>
                                    <button onclick="exportCurrentReport('excel')" class="export-btn">๐ Excel</button>
                                </div>
                            </div>
                            <div class="report-table-container" id="cashiers-report-content">
                                <!-- Dynamic Content -->
                            </div>
                        </div>

                        <!-- Inventory View -->
                        <div id="report-view-inventory" class="report-view hidden">
                            <div class="report-header-bar">
                                <div class="report-sub-tabs">
                                    <button class="sub-tab-btn active"
                                        onclick="loadInventorySubReport('current')">ุงููุฎุฒูู ุงูุญุงูู</button>
                                    <button class="sub-tab-btn" onclick="loadInventorySubReport('low')">ููุฎูุถ
                                        ุงููุฎุฒูู</button>
                                    <button class="sub-tab-btn" onclick="loadInventorySubReport('movement')">ุญุฑูุฉ
                                        ุงููุฎุฒูู</button>
                                </div>
                                <div class="report-export-bar">
                                    <button onclick="exportCurrentReport('csv')" class="export-btn">๐ฅ CSV</button>
                                    <button onclick="exportCurrentReport('excel')" class="export-btn">๐ Excel</button>
                                </div>
                            </div>
                            <div class="report-table-container" id="inventory-report-content">
                                <!-- Dynamic Content -->
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Day Closing Modal -->
            <div id="day-closing-modal" class="modal hidden">
                <div class="modal-content" style="max-width:700px;">
                    <span class="close-btn" onclick="closeModal('day-closing-modal')">&times;</span>
                    <h2 style="text-align:center; margin-bottom:12px;">โญ ุชูุฑูุฑ ุฅููุงู ุงูููู</h2>

                    <div class="day-closing-date" style="text-align:center; margin-bottom:12px;">
                        <label>ุชุงุฑูุฎ ุงูุฅููุงู:</label>
                        <input type="date" id="day-closing-date"
                            style="padding:6px; border-radius:4px; border:1px solid #ddd;">
                        <button onclick="loadDayClosingReport()" style="padding:6px 12px;">ุชุญููู</button>
                    </div>

                    <div id="day-closing-content" style="background:#f9f9f9; padding:12px; border-radius:6px;">
                        <!-- Dynamic Content -->
                        <div class="dc-summary-grid">
                            <div class="dc-item">
                                <span class="dc-label">ุฅุฌูุงูู ุงููุจูุนุงุช</span>
                                <span class="dc-value" id="dc-total-sales">0.00</span>
                            </div>
                            <div class="dc-item">
                                <span class="dc-label">ุนุฏุฏ ุงูููุงุชูุฑ</span>
                                <span class="dc-value" id="dc-invoice-count">0</span>
                            </div>
                            <div class="dc-item">
                                <span class="dc-label">ุงูุฃุตูุงู ุงููุจุงุนุฉ</span>
                                <span class="dc-value" id="dc-items-sold">0</span>
                            </div>
                        </div>

                        <div class="dc-divider"></div>

                        <div class="dc-payment-grid">
                            <div class="dc-payment-item">
                                <span class="dc-icon">๐ต</span>
                                <span class="dc-label">ุงูููุฏ</span>
                                <span class="dc-value" id="dc-cash">0.00</span>
                            </div>
                            <div class="dc-payment-item">
                                <span class="dc-icon">๐ณ</span>
                                <span class="dc-label">ุงูุจุทุงูุฉ</span>
                                <span class="dc-value" id="dc-card">0.00</span>
                            </div>
                            <div class="dc-payment-item">
                                <span class="dc-icon">๐</span>
                                <span class="dc-label">ุงูุขุฌู</span>
                                <span class="dc-value" id="dc-credit">0.00</span>
                            </div>
                        </div>

                        <div class="dc-divider"></div>

                        <div class="dc-returns">
                            <span class="dc-label">โฉ๏ธ ุงููุฑุชุฌุนุงุช</span>
                            <span class="dc-value dc-negative" id="dc-returns">0.00</span>
                        </div>

                        <div class="dc-divider"></div>

                        <div class="dc-net-total">
                            <span class="dc-label">๐ฐ ุตุงูู ุงูุฅูุฑุงุฏ</span>
                            <span class="dc-value dc-highlight" id="dc-net-total">0.00</span>
                        </div>
                    </div>

                    <div class="day-closing-actions"
                        style="display:flex; gap:8px; margin-top:12px; justify-content:center;">
                        <button onclick="exportDayClosingExcel()" style="background:#27ae60; padding:10px 20px;">
                            ๐ ุชุตุฏูุฑ Excel
                        </button>
                        <button onclick="exportDayClosingPDF()" style="background:#e74c3c; padding:10px 20px;">
                            ๐ ุญูุธ PDF
                        </button>
                        <button onclick="printDayClosing()" style="background:#3498db; padding:10px 20px;">
                            ๐จ๏ธ ุทุจุงุนุฉ
                        </button>
                    </div>
                </div>
            </div>

            <!-- USERS SECTION -->
            <div id="users-section" class="section hidden">
                <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                    <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
                    <!-- Button on the left -->
                    <button style="width:auto; padding:10px 20px;" onclick="openUserModal()">ุฅุถุงูุฉ ูุณุชุฎุฏู</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>ุงูุงุณู</th>
                            <th>ุงุณู ุงูุฏุฎูู</th>
                            <th>ุงูุตูุงุญูุฉ</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body"></tbody>
                </table>
            </div>

            <!-- SETTINGS SECTION -->
            <div id="settings-section" class="section hidden">
                <h2>ุฅุนุฏุงุฏุงุช ุงููุธุงู</h2>

                <div class="settings-tab-container" style="margin-bottom:15px; display:flex; flex-wrap:wrap; gap:5px;">
                    <button class="tab-btn active" onclick="switchSettingsTab('program')" id="st-btn-program">ุฅุนุฏุงุฏุงุช
                        ุงูุจุฑูุงูุฌ</button>
                    <button class="tab-btn" onclick="switchSettingsTab('store')" id="st-btn-store">ุจูุงูุงุช
                        ุงููุชุฌุฑ</button>
                    <button class="tab-btn" onclick="switchSettingsTab('print')" id="st-btn-print">ุทุจุงุนุฉ
                        ุงูููุงุชูุฑ</button>
                    <button class="tab-btn" onclick="switchSettingsTab('barcode')" id="st-btn-barcode">ุทุจุงุนุฉ
                        ุงูุจุงุฑููุฏ</button>
                    <button class="tab-btn" onclick="switchSettingsTab('backup')" id="st-btn-backup">ุงููุณุฎ
                        ุงูุงุญุชูุงุทู</button>
                    <button class="tab-btn" onclick="switchSettingsTab('about')" id="st-btn-about">ุนู ุงูุจุฑูุงูุฌ</button>
                </div>

                <!-- STORE DATA SETTINGS -->
                <div id="st-view-store" class="hidden"
                    style="background:white; padding:20px; border-radius:8px; max-width:600px; border:1px solid #e1e4e8;">
                    <h3 style="margin-bottom:15px; color:#2c3e50;">๐ช ุจูุงูุงุช ุงููุชุฌุฑ</h3>
                    <label>ุดุนุงุฑ ุงููุชุฌุฑ:</label>
                    <div style="margin-bottom:15px; text-align:center;">
                        <img id="set-logo-preview"
                            style="width:100px; height:100px; object-fit:contain; border:1px solid #eee; padding:5px; border-radius:4px; margin-bottom:10px; display:block; margin-left:auto; margin-right:auto;">
                        <input type="file" id="set-logo-upload" accept="image/*" style="display:block; margin:0 auto;">
                    </div>

                    <label>ุงุณู ุงููุชุฌุฑ:</label>
                    <input type="text" id="set-store-name">
                    <label>ุฑูู ุงููุงุชู:</label>
                    <input type="text" id="set-store-phone">
                    <label>ุงูุนููุงู:</label>
                    <input type="text" id="set-store-address">
                    <label>ุชุฐููู ุงููุงุชูุฑุฉ:</label>
                    <input type="text" id="set-receipt-footer">
                    <button onclick="saveSettings()">ุญูุธ ุจูุงูุงุช ุงููุชุฌุฑ</button>
                </div>

                <!-- PROGRAM SETTINGS -->
                <div id="st-view-program"
                    style="background:white; padding:20px; border-radius:8px; max-width:600px; border:1px solid #e1e4e8;">
                    <h3 style="margin-bottom:15px; color:#2c3e50;">โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ</h3>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                        <div>
                            <label>ุตูุบุฉ ุงูุชุงุฑูุฎ:</label>
                            <select id="set-date-format">
                                <option value="DD/MM/YYYY">DD/MM/YYYY (ูุซุงู: 13/01/2026)</option>
                                <option value="MM/DD/YYYY">MM/DD/YYYY (ูุซุงู: 01/13/2026)</option>
                                <option value="YYYY-MM-DD">YYYY-MM-DD (ูุซุงู: 2026-01-13)</option>
                            </select>
                        </div>
                        <div>
                            <label>ุตูุบุฉ ุงูููุช:</label>
                            <select id="set-time-format">
                                <option value="24">24 ุณุงุนุฉ (ูุซุงู: 14:30)</option>
                                <option value="12">12 ุณุงุนุฉ (ูุซุงู: 2:30 ู)</option>
                            </select>
                        </div>
                    </div>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-top:15px;">
                        <div>
                            <label>ุฑูุฒ ุงูุนููุฉ:</label>
                            <select id="set-currency">
                                <option value="ุฌ.ู">ุฌ.ู (ุฌููู ูุตุฑู)</option>
                                <option value="ุฑ.ุณ">ุฑ.ุณ (ุฑูุงู ุณุนูุฏู)</option>
                                <option value="ุฏ.ุฅ">ุฏ.ุฅ (ุฏุฑูู ุฅูุงุฑุงุชู)</option>
                                <option value="ุฏ.ู">ุฏ.ู (ุฏููุงุฑ ูููุชู)</option>
                                <option value="ุฑ.ู">ุฑ.ู (ุฑูุงู ูุทุฑู)</option>
                                <option value="ุฑ.ุน">ุฑ.ุน (ุฑูุงู ุนูุงูู)</option>
                                <option value="ุฏ.ุจ">ุฏ.ุจ (ุฏููุงุฑ ุจุญุฑููู)</option>
                                <option value="ุฏ.ุฌ">ุฏ.ุฌ (ุฏููุงุฑ ุฌุฒุงุฆุฑู)</option>
                                <option value="ุฏ.ู">ุฏ.ู (ุฏุฑูู ูุบุฑุจู)</option>
                                <option value="ุฏ.ุช">ุฏ.ุช (ุฏููุงุฑ ุชููุณู)</option>
                                <option value="ุฏ.ู">ุฏ.ู (ุฏููุงุฑ ููุจู)</option>
                                <option value="ุฌ.ุณ">ุฌ.ุณ (ุฌููู ุณูุฏุงูู)</option>
                                <option value="ุฏ.ุน">ุฏ.ุน (ุฏููุงุฑ ุนุฑุงูู)</option>
                                <option value="ู.ุณ">ู.ุณ (ููุฑุฉ ุณูุฑูุฉ)</option>
                                <option value="ู.ู">ู.ู (ููุฑุฉ ูุจูุงููุฉ)</option>
                                <option value="ุฏ.ุฃ">ุฏ.ุฃ (ุฏููุงุฑ ุฃุฑุฏูู)</option>
                                <option value="ุฑ.ู">ุฑ.ู (ุฑูุงู ูููู)</option>
                                <option value="ุด.ุต">ุด.ุต (ุดูู ุตููุงูู)</option>
                                <option value="ุฃ.ุฌ">ุฃ.ุฌ (ุฃูููุฉ ููุฑูุชุงููุฉ)</option>
                                <option value="ู.ุฌ">ู.ุฌ (ูุฑูู ุฌูุจูุชู)</option>
                                <option value="ู.ู">ู.ู (ูุฑูู ููุฑู)</option>
                                <option value="$">$ (ุฏููุงุฑ)</option>
                                <option value="โฌ">โฌ (ููุฑู)</option>
                            </select>
                        </div>
                        <div>
                            <label>ุงูููุงุฒู ุงูุนุดุฑูุฉ:</label>
                            <select id="set-decimals">
                                <option value="0">ุจุฏูู (ูุซุงู: 100)</option>
                                <option value="2" selected>2 ููุงุฒู (ูุซุงู: 100.00)</option>
                                <option value="3">3 ููุงุฒู (ูุซุงู: 100.000)</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin-top:15px;">
                        <label>ูุบุฉ ุงูุจุฑูุงูุฌ:</label>
                        <select id="set-language" disabled>
                            <option value="ar" selected>ุงูุนุฑุจูุฉ</option>
                        </select>
                        <small style="color:#777;">ุงููุบุงุช ุงูุฅุถุงููุฉ ูุฑูุจุงู</small>
                    </div>

                    <button onclick="saveProgramSettings()" style="margin-top:20px;">ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ</button>
                </div>

                <!-- PRINT SETTINGS -->
                <div id="st-view-print" class="hidden"
                    style="background:white; padding:20px; border-radius:8px; max-width:700px; border:1px solid #e1e4e8;">
                    <h3 style="margin-bottom:15px; color:#2c3e50;">๐จ๏ธ ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ</h3>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">ุงุฎุชูุงุฑ ุงูุทุงุจุนุฉ</h4>
                            <select id="set-printer" style="width:100%;">
                                <option value="">-- ุงุฎุชุฑ ุงูุทุงุจุนุฉ --</option>
                            </select>
                            <button onclick="loadPrinters()"
                                style="margin-top:10px; background:#3498db; font-size:12px; padding:8px;">๐ ุชุญุฏูุซ
                                ุงููุงุฆูุฉ</button>
                        </div>

                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">ููุงุณ ุงููุฑู</h4>
                            <div style="display:flex; gap:10px;">
                                <label for="paper-80" onclick="selectPaperSize('80')"
                                    style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                    id="paper-80-label">
                                    <input type="radio" name="paper-size" value="80" id="paper-80" checked>
                                    <div style="font-size:20px; font-weight:bold;">80mm</div>
                                    <div style="font-size:11px; color:#777;">ุงูุทุงุจุนุงุช ุงููุจูุฑุฉ</div>
                                </label>
                                <label for="paper-58" onclick="selectPaperSize('58')"
                                    style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                    id="paper-58-label">
                                    <input type="radio" name="paper-size" value="58" id="paper-58">
                                    <div style="font-size:20px; font-weight:bold;">58mm</div>
                                    <div style="font-size:11px; color:#777;">ุงูุทุงุจุนุงุช ุงูุตุบูุฑุฉ</div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">ุนุฏุฏ ุงููุณุฎ</h4>
                            <div style="display:flex; gap:10px;">
                                <label for="copies-1" onclick="selectPrintCopies('1')"
                                    style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                    id="copies-1-label">
                                    <input type="radio" name="print-copies" value="1" id="copies-1" checked>
                                    <div style="font-size:16px; font-weight:bold;">ูุณุฎุฉ ูุงุญุฏุฉ</div>
                                </label>
                                <label for="copies-2" onclick="selectPrintCopies('2')"
                                    style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                    id="copies-2-label">
                                    <input type="radio" name="print-copies" value="2" id="copies-2">
                                    <div style="font-size:16px; font-weight:bold;">ูุณุฎุชูู</div>
                                    <div style="font-size:10px; color:#777;">ููุฒุจูู + ูููุญู</div>
                                </label>
                            </div>
                        </div>

                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">โก ุงูุทุจุงุนุฉ ุงูุชููุงุฆูุฉ</h4>
                            <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                                <input type="checkbox" id="set-auto-print" style="width:20px; height:20px;">
                                <span>ุชูุนูู ุงูุทุจุงุนุฉ ุงูุชููุงุฆูุฉ</span>
                            </label>
                            <p style="font-size:11px; color:#777; margin-top:8px;">ุนูุฏ ุชูุนูู ูุฐุง ุงูุฎูุงุฑุ ุณูุชู ุฅุฑุณุงู
                                ุงููุงุชูุฑุฉ ููุทุงุจุนุฉ ูุจุงุดุฑุฉ ุจุนุฏ ุฅุชูุงู ุงูุจูุน ุจุฏูู ุฃู ููุงูุฐ ุฅุถุงููุฉ.</p>
                        </div>

                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">๐ผ๏ธ ุดุนุงุฑ ุงููุชุฌุฑ ูู ุงููุงุชูุฑุฉ</h4>
                            <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                                <input type="checkbox" id="set-print-logo" checked style="width:20px; height:20px;">
                                <span>ุทุจุงุนุฉ ุงูุดุนุงุฑ ูู ุงููุงุชูุฑุฉ</span>
                            </label>
                            <p style="font-size:11px; color:#777; margin-top:8px;">ุนูุฏ ุชูุนูู ูุฐุง ุงูุฎูุงุฑุ ุณูุธูุฑ ุดุนุงุฑ
                                ุงููุชุฌุฑ ูู ุฃุนูู ุงููุงุชูุฑุฉ ุงููุทุจูุนุฉ (ูุชุทูุจ ุฑูุน ุดุนุงุฑ ูู ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ).</p>
                        </div>
                    </div>

                    <div style="display:flex; gap:10px; margin-top:20px;">
                        <button onclick="testPrint()" style="flex:1; background:#8e44ad;">๐งช ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ</button>
                        <button onclick="savePrintSettings()" style="flex:1; background:#27ae60;">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช
                            ุงูุทุจุงุนุฉ</button>
                    </div>
                </div>

                <!-- BARCODE SETTINGS - INDEPENDENT FROM RECEIPT PRINTING -->
                <div id="st-view-barcode" class="hidden"
                    style="background:white; padding:20px; border-radius:8px; max-width:700px; border:1px solid #e1e4e8;">
                    <h3 style="margin-bottom:15px; color:#2c3e50;">๐ท๏ธ ุฅุนุฏุงุฏุงุช ุทุจุงุนุฉ ุงูุจุงุฑููุฏ</h3>
                    <p
                        style="color:#777; font-size:12px; margin-bottom:15px; background:#f8f9fa; padding:10px; border-radius:4px;">
                        โ๏ธ ูุฐู ุงูุฅุนุฏุงุฏุงุช ูุณุชููุฉ ุชูุงูุงู ุนู ุฅุนุฏุงุฏุงุช ุทุจุงุนุฉ ุงูููุงุชูุฑ ููุง ุชุคุซุฑ ุนูููุง.
                    </p>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                        <!-- Printer Selection -->
                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">๐จ๏ธ ุทุงุจุนุฉ ุงูุจุงุฑููุฏ</h4>
                            <select id="bc-printer" style="width:100%;">
                                <option value="">-- ุงุฎุชุฑ ุงูุทุงุจุนุฉ --</option>
                            </select>
                            <button onclick="loadBarcodePrinters()"
                                style="margin-top:10px; background:#3498db; font-size:12px; padding:8px;">๐ ุชุญุฏูุซ
                                ุงููุงุฆูุฉ</button>
                        </div>

                        <!-- Barcode Type -->
                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">๐ ููุน ุงูุจุงุฑููุฏ</h4>
                            <div style="display:flex; gap:10px;">
                                <label
                                    style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                    id="bc-type-128-label">
                                    <input type="radio" name="bc-type" value="CODE128" id="bc-type-128" checked
                                        style="display:none;">
                                    <div style="font-size:14px; font-weight:bold;">CODE128</div>
                                    <div style="font-size:10px; color:#777;">ุนุงู - ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู</div>
                                </label>
                                <label
                                    style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                    id="bc-type-ean-label">
                                    <input type="radio" name="bc-type" value="EAN13" id="bc-type-ean"
                                        style="display:none;">
                                    <div style="font-size:14px; font-weight:bold;">EAN13</div>
                                    <div style="font-size:10px; color:#777;">ูุนูุงุฑ ุงููุชุงุฌุฑ</div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
                        <!-- Custom Label Dimensions -->
                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">๐ ุฃุจุนุงุฏ ุงูููุตู (ูููููุชุฑ)</h4>
                            <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px;">
                                <div>
                                    <label style="font-size:11px; color:#666;">ุงูุนุฑุถ</label>
                                    <input type="number" id="bc-label-width" value="40" min="20" max="100"
                                        style="width:100%; text-align:center; font-size:14px;">
                                </div>
                                <div>
                                    <label style="font-size:11px; color:#666;">ุงูุงุฑุชูุงุน</label>
                                    <input type="number" id="bc-label-height" value="30" min="15" max="100"
                                        style="width:100%; text-align:center; font-size:14px;">
                                </div>
                                <div>
                                    <label style="font-size:11px; color:#666;">ุงููุณุงูุฉ</label>
                                    <input type="number" id="bc-label-gap" value="2" min="0" max="10"
                                        style="width:100%; text-align:center; font-size:14px;">
                                </div>
                            </div>
                            <p style="font-size:10px; color:#888; margin-top:8px;">ูุณ ููุตูุงุชู ุจุงูููููุชุฑ ูุฃุฏุฎู ุงูููู ููุง
                            </p>
                        </div>

                        <!-- Default Copies -->
                        <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 style="margin-bottom:10px;">๐ข ุนุฏุฏ ุงููุณุฎ ุงูุงูุชุฑุงุถู</h4>
                            <input type="number" id="bc-copies" value="1" min="1" max="99"
                                style="width:100px; text-align:center; font-size:16px;">
                        </div>
                    </div>

                    <div style="border:1px solid #eee; padding:15px; border-radius:8px; margin-top:20px;">
                        <h4 style="margin-bottom:10px;">๐ ูุญุชูู ุงูููุตู</h4>
                        <div style="display:flex; gap:30px;">
                            <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                                <input type="checkbox" id="bc-show-name" checked style="width:18px; height:18px;">
                                <span>ุทุจุงุนุฉ ุงุณู ุงูููุชุฌ</span>
                            </label>
                            <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                                <input type="checkbox" id="bc-show-price" style="width:18px; height:18px;">
                                <span>ุทุจุงุนุฉ ุงูุณุนุฑ</span>
                            </label>
                        </div>
                    </div>

                    <div style="border:1px solid #eee; padding:15px; border-radius:8px; margin-top:20px;">
                        <h4 style="margin-bottom:10px;">โ๏ธ ูุบุฉ ุงูุทุงุจุนุฉ</h4>
                        <div style="display:flex; gap:10px;">
                            <label
                                style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                id="bc-lang-tspl-label">
                                <input type="radio" name="bc-lang" value="TSPL" id="bc-lang-tspl" checked
                                    style="display:none;">
                                <div style="font-size:13px; font-weight:bold;">TSPL</div>
                                <div style="font-size:10px; color:#777;">Xprinter, TSC, Godex</div>
                            </label>
                            <label
                                style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                id="bc-lang-zpl-label">
                                <input type="radio" name="bc-lang" value="ZPL" id="bc-lang-zpl" style="display:none;">
                                <div style="font-size:13px; font-weight:bold;">ZPL</div>
                                <div style="font-size:10px; color:#777;">Zebra, SATO</div>
                            </label>
                            <label
                                style="flex:1; padding:10px; border:2px solid #eee; border-radius:8px; text-align:center; cursor:pointer;"
                                id="bc-lang-escpos-label">
                                <input type="radio" name="bc-lang" value="ESCPOS" id="bc-lang-escpos"
                                    style="display:none;">
                                <div style="font-size:13px; font-weight:bold;">ESC/POS</div>
                                <div style="font-size:10px; color:#777;">ุทุงุจุนุงุช ุงูููุงุชูุฑ</div>
                            </label>
                        </div>
                        <p style="color:#888; font-size:11px; margin-top:8px;">
                            ๐ก TSPL ูู ุงูุฃูุซุฑ ุชูุงููุงู ูุน ุทุงุจุนุงุช ุงูููุตูุงุช. ุฌุฑุจ ZPL ุฅุฐุง ูู ูุนูู.
                        </p>
                    </div>

                    <div style="display:flex; gap:10px; margin-top:20px;">
                        <button onclick="testBarcodePrint()" style="flex:1; background:#8e44ad;">๐งช ุงุฎุชุจุงุฑ ุทุจุงุนุฉ
                            ุจุงุฑููุฏ</button>
                        <button onclick="saveBarcodeSettings()" style="flex:1; background:#27ae60;">๐พ ุญูุธ
                            ุงูุฅุนุฏุงุฏุงุช</button>
                    </div>
                </div>

                <!-- BACKUP SETTINGS -->
                <div id="st-view-backup" class="hidden"
                    style="background:white; padding:20px; border-radius:8px; max-width:800px; border:1px solid #e1e4e8;">
                    <h3 style="margin-bottom:15px; color:#2c3e50;">๐พ ุงููุณุฎ ุงูุงุญุชูุงุทู</h3>

                    <div style="display:flex; gap:20px; margin-bottom:20px;">
                        <div style="flex:1; border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 class="center-header">ูุณุฎ ุงุญุชูุงุทู ููุฑู</h4>
                            <p style="color:#777; font-size:13px; margin-bottom:10px;">ุฅูุดุงุก ูุณุฎุฉ ูุงููุฉ ูู ุงูุจูุงูุงุช
                                ุงูุญุงููุฉ.</p>
                            <button onclick="performManualBackup()" style="width:100%; background:#2980b9;">๐ค ุฅูุดุงุก
                                ูุณุฎุฉ ุงูุขู</button>
                        </div>
                        <div style="flex:1; border:1px solid #eee; padding:15px; border-radius:8px;">
                            <h4 class="center-header">ุงุณุชูุฑุงุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</h4>
                            <p style="color:#777; font-size:13px; margin-bottom:10px;">ุงุณุชุนุงุฏุฉ ุจูุงูุงุช ูู ูุณุฎุฉ ูุญููุธุฉ ุนูู
                                ุงูุฌูุงุฒ.</p>
                            <button onclick="importBackupFromFile()" style="width:100%; background:#e67e22;">๐ฅ ุงุณุชูุฑุงุฏ
                                ูู ููู</button>
                        </div>
                    </div>

                    <div style="border:1px solid #eee; padding:15px; border-radius:8px; margin-bottom:20px;">
                        <h4 class="center-header">ุงูุฅุนุฏุงุฏุงุช ุงูุชููุงุฆูุฉ</h4>
                        <div style="display:flex; gap:20px; align-items:center;">
                            <div style="flex:1;">
                                <input type="checkbox" id="bk-auto-toggle">
                                <label for="bk-auto-toggle" style="font-weight:bold;">ุชูุนูู ุงููุณุฎ ุงููููู
                                    ุงูุชููุงุฆู</label>
                            </div>
                            <div style="flex:2;">
                                <label>ูุณุงุฑ ุงูุญูุธ:</label>
                                <div class="backup-path-row" style="display:flex; gap:5px;">
                                    <input type="text" id="bk-path" readonly style="flex:1;">
                                    <button onclick="selectBackupPath()"
                                        style="width:auto; padding:5px 15px;">...</button>
                                </div>
                            </div>
                        </div>
                        <button onclick="saveBackupSettings()" style="margin-top:10px; background:#27ae60;">ุญูุธ
                            ุงูุฅุนุฏุงุฏุงุช</button>
                    </div>

                    <h4>ุณุฌู ุงูุนูููุงุช</h4>
                    <div style="max-height:250px; overflow-y:auto; border:1px solid #eee; border-radius:4px;">
                        <table class="simple-table" style="margin:0;">
                            <thead>
                                <tr>
                                    <th>ุงูุชุงุฑูุฎ</th>
                                    <th>ุงูููุน</th>
                                    <th>ุงูุญุฌู</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="backup-logs-body"></tbody>
                        </table>
                    </div>

                    <!-- SYSTEM RESET SECTION -->
                    <div
                        style="margin-top:30px; border:2px solid #e74c3c; padding:20px; border-radius:8px; background:#fff5f5;">
                        <h4 style="color:#e74c3c; margin-bottom:10px;">๐๏ธ ุฅุนุงุฏุฉ ุถุจุท ุงููุธุงู</h4>
                        <p style="color:#777; font-size:13px; margin-bottom:15px;">
                            <strong>ุชุญุฐูุฑ:</strong> ูุฐุง ุงูุฅุฌุฑุงุก ุณูููู ุจุญุฐู ุฌููุน ุงูุจูุงูุงุช (ุงูููุชุฌุงุชุ ุงูููุงุชูุฑุ ุงูุนููุงุกุ
                            ุงูุชูุงุฑูุฑ) ูุฅุนุงุฏุฉ ุงูุจุฑูุงูุฌ ูุญุงูุชู ุงูุฃุตููุฉ ูุฃูู ูุซุจุช ููุชู.
                        </p>
                        <button onclick="openResetModal()" style="background:#e74c3c; width:auto; padding:10px 30px;">
                            ุฅุนุงุฏุฉ ุถุจุท ุงููุตูุน
                        </button>
                    </div>
                </div>

                <!-- ABOUT PROGRAM -->
                <div id="st-view-about" class="hidden"
                    style="background:white; padding:20px; border-radius:8px; max-width:700px; border:1px solid #e1e4e8;">
                    <h3 style="margin-bottom:15px; color:#2c3e50;">โน๏ธ ุนู ุงูุจุฑูุงูุฌ</h3>

                    <!-- Program Info -->
                    <div
                        style="text-align:center; margin-bottom:20px; padding:20px; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius:12px; color:white;">
                        <div style="font-size:48px; margin-bottom:10px;">๐</div>
                        <div style="font-size:24px; font-weight:bold;">SUPER_P0S</div>
                        <div style="font-size:14px; opacity:0.9;">ูุธุงู ููุงุท ุงูุจูุน ุงูุฐูู</div>
                        <div
                            style="font-size:16px; margin-top:10px; background:rgba(255,255,255,0.2); padding:5px 15px; border-radius:20px; display:inline-block;">
                            ุงูุฅุตุฏุงุฑ <span id="about-version">2.0.3</span>
                        </div>
                    </div>

                    <!-- License Status -->
                    <div style="border:1px solid #eee; padding:15px; border-radius:8px; margin-bottom:15px;">
                        <h4 style="margin-bottom:10px;">๐ ุญุงูุฉ ุงูุชุฑุฎูุต</h4>
                        <div id="license-status-box" style="display:flex; gap:15px; align-items:center;">
                            <div id="license-status-icon" style="font-size:40px;">โณ</div>
                            <div style="flex:1;">
                                <div id="license-status-text" style="font-size:16px; font-weight:bold; color:#2c3e50;">
                                    ุฌุงุฑู ุงูุชุญูู...</div>
                                <div id="license-status-detail" style="font-size:12px; color:#777;">-</div>
                            </div>
                        </div>

                        <!-- Device Hash -->
                        <div style="margin-top:15px; background:#f5f5f5; padding:10px; border-radius:4px;">
                            <label style="font-size:11px; color:#777; display:block;">ุฑูุฒ ุงูุฌูุงุฒ (Device Hash):</label>
                            <div id="about-device-hash"
                                style="font-family:monospace; font-size:12px; word-break:break-all; cursor:pointer;"
                                onclick="copyAboutDeviceHash()">-</div>
                            <div id="about-copy-msg" style="font-size:10px; color:green; height:15px;"></div>
                        </div>

                        <!-- Activation Section -->
                        <div id="about-activation-section" style="margin-top:15px; display:none;">
                            <input type="text" id="about-license-input" placeholder="ุฃุฏุฎู ููุฏ ุงูุชูุนูู ููุง"
                                style="width:100%; text-align:center; font-family:monospace; margin-bottom:10px;">
                            <button onclick="activateFromAbout()" style="width:100%; background:var(--success-color);">
                                ุชูุนูู ุงูุขู
                            </button>
                            <p id="about-activation-error" style="color:red; font-size:12px; margin-top:5px;"></p>
                        </div>
                    </div>

                    <!-- Developer Info -->
                    <div style="border:1px solid #eee; padding:15px; border-radius:8px;">
                        <h4 style="margin-bottom:10px;">๐จโ๐ป ุงููุทูุฑ</h4>
                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; font-size:13px;">
                            <div><strong>ุงูุดุฑูุฉ:</strong> ุงููุงุณ</div>
                            <div><strong>ูุงุชุณุงุจ:</strong> <a href="https://wa.me/213696170553" target="_blank"
                                    style="color:#25D366; text-decoration:none;">+213696170553</a></div>
                            <div><strong>ุงููููุน:</strong> <a href="mailto:roinegue@gmail.com" target="_blank"
                                    style="color:#667eea; text-decoration:none;">roinegue@gmail.com</a></div>
                            <div><strong>ุงูุณูุฉ:</strong> 2026</div>
                        </div>
                    </div>

                    <div style="margin-top:15px; text-align:center; color:#999; font-size:11px;">
                        seia ุฌููุน ุงูุญููู ูุญููุธุฉ 2026
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="product-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span>ุจูุงูุงุช ุงูููุชุฌ</span>
                <span class="close-modal" onclick="closeModal('product-modal')">&times;</span>
            </div>
            <input type="hidden" id="prod-id">
            <div class="product-image-upload-container" style="text-align: center; margin-bottom: 15px;">
                <img id="prod-image-preview" src="" alt="Product Image"
                    style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px; border: 1px solid #ddd; display: none; margin: 0 auto 10px;">
                <input type="file" id="prod-image-input" accept="image/*"
                    style="display: block; margin: 0 auto; width: 200px; font-size: 12px;"
                    onchange="previewProductImage(this)">
            </div>
            <input type="text" id="prod-barcode" placeholder="ุงูุจุงุฑููุฏ">
            <input type="text" id="prod-name" placeholder="ุงุณู ุงูููุชุฌ">
            <select id="prod-category"></select>
            <input type="number" id="prod-price" placeholder="ุณุนุฑ ุงูุจูุน">
            <input type="number" id="prod-cost" placeholder="ุณุนุฑ ุงูุชูููุฉ">
            <div style="display:flex; gap:10px;">
                <input type="number" id="prod-stock" placeholder="ุงููููุฉ ุงูุญุงููุฉ">
                <input type="number" id="prod-low-stock" placeholder="ุญุฏ ุงูุชูุจูู" value="5">
            </div>
            <button onclick="saveProduct()">ุญูุธ</button>
        </div>
    </div>

    <div id="category-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span>ุฅุฏุงุฑุฉ ุงููุฆุฉ</span>
                <span class="close-modal" onclick="closeModal('category-modal')">&times;</span>
            </div>
            <input type="hidden" id="cat-id">
            <input type="text" id="cat-name" placeholder="ุงุณู ุงููุฆุฉ">
            <button onclick="saveCategory()">ุญูุธ</button>
        </div>
    </div>

    <div id="user-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span id="user-modal-title">ูุณุชุฎุฏู ุฌุฏูุฏ</span>
                <span class="close-modal" onclick="closeModal('user-modal')">&times;</span>
            </div>
            <input type="hidden" id="user-id"> <!-- Added ID field -->
            <input type="text" id="user-name" placeholder="ุงูุงุณู ุงููุงูู">
            <input type="text" id="user-username" placeholder="ุงุณู ุงูุฏุฎูู">
            <input type="password" id="user-password" placeholder="ูููุฉ ุงููุฑูุฑ (ุงุชุฑูู ูุงุฑุบุงู ูุนุฏู ุงูุชุบููุฑ)">
            <select id="user-role" onchange="togglePermissionsView()">
                <option value="cashier">ูุงุดูุฑ</option>
                <option value="admin">ูุฏูุฑ</option>
            </select>

            <div id="user-permissions-block"
                style="margin-top:10px; border:1px solid #ddd; padding:10px; border-radius:4px;">
                <label style="font-weight:bold; font-size:12px; margin-bottom:5px; display:block;">ุงูุตูุงุญูุงุช:</label>
                <div style="display:flex; flex-wrap:wrap; gap:10px;">
                    <label class="perm-chk"><input type="checkbox" id="perm-pos" value="pos"> ููุทุฉ ุงูุจูุน</label>
                    <label class="perm-chk"><input type="checkbox" id="perm-products" value="products"> ุงูููุชุฌุงุช</label>
                    <label class="perm-chk"><input type="checkbox" id="perm-customers" value="customers">
                        ุงูุนููุงุก</label>
                    <label class="perm-chk"><input type="checkbox" id="perm-reports" value="reports"> ุงูุชูุงุฑูุฑ</label>
                    <label class="perm-chk"><input type="checkbox" id="perm-users" value="users"> ุงููุณุชุฎุฏููู</label>
                    <label class="perm-chk"><input type="checkbox" id="perm-settings" value="settings">
                        ุงูุฅุนุฏุงุฏุงุช</label>
                </div>
            </div>

            <button onclick="saveUser()">ุญูุธ</button>
        </div>
    </div>

    <!-- USER STATS MODAL -->
    <div id="user-stats-modal" class="modal hidden">
        <div class="modal-content" style="width:400px;">
            <div class="modal-header">
                <span id="stats-user-name">ุฅุญุตุงุฆูุงุช</span>
                <span class="close-modal" onclick="closeModal('user-stats-modal')">&times;</span>
            </div>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; text-align:center;">
                <div style="background:#f9f9f9; padding:15px; border-radius:8px; border:1px solid #eee;">
                    <div style="font-size:12px; color:#777;">ุฅุฌูุงูู ุงููุจูุนุงุช</div>
                    <div id="stats-total" style="font-size:20px; font-weight:bold; color:var(--success-color)">0.00
                    </div>
                </div>
                <div style="background:#f9f9f9; padding:15px; border-radius:8px; border:1px solid #eee;">
                    <div style="font-size:12px; color:#777;">ุนุฏุฏ ุงูููุงุชูุฑ</div>
                    <div id="stats-count" style="font-size:20px; font-weight:bold; color:var(--primary-color)">0</div>
                </div>
                <div style="background:#f9f9f9; padding:15px; border-radius:8px; border:1px solid #eee;">
                    <div style="font-size:12px; color:#777;">ูุชูุณุท ุงููุงุชูุฑุฉ</div>
                    <div id="stats-avg" style="font-size:20px; font-weight:bold; color:#e67e22">0.00</div>
                </div>
                <div style="background:#f9f9f9; padding:15px; border-radius:8px; border:1px solid #eee;">
                    <div style="font-size:12px; color:#777;">ุขุฎุฑ ุธููุฑ</div>
                    <div id="stats-last" style="font-size:12px; font-weight:bold; color:#555; margin-top:5px;">-</div>
                </div>
            </div>
        </div>
    </div>

    <!-- EXCEL IMPORT MODAL -->
    <div id="import-modal" class="modal hidden">
        <div class="modal-content" style="max-width:550px;">
            <div class="modal-header">
                <span>๐ฅ ุงุณุชูุฑุงุฏ ุงูููุชุฌุงุช ูู Excel</span>
                <span class="close-modal" onclick="closeModal('import-modal')">&times;</span>
            </div>
            <div style="padding:15px;">
                <div style="background:#f8f9fa; padding:15px; border-radius:8px; margin-bottom:15px;">
                    <h4 style="margin-bottom:10px;">๐ ุงูุฎุทูุฉ 1: ุชุญููู ุงููุงูุจ</h4>
                    <p style="font-size:13px; color:#666; margin-bottom:10px;">ุญููู ูุงูุจ Excel ููู ุจุชุนุจุฆุชู ุจุจูุงูุงุช
                        ุงูููุชุฌุงุช.</p>
                    <button onclick="downloadExcelTemplate()" style="background:#27ae60;">โฌ๏ธ ุชุญููู ูุงูุจ Excel</button>
                </div>
                <div style="background:#f8f9fa; padding:15px; border-radius:8px;">
                    <h4 style="margin-bottom:10px;">๐ค ุงูุฎุทูุฉ 2: ุฑูุน ุงูููู</h4>
                    <p style="font-size:13px; color:#666; margin-bottom:10px;">ุงุฎุชุฑ ููู Excel ุงููุนุจุฃ ูุงุณุชูุฑุงุฏ ุงูููุชุฌุงุช.
                    </p>
                    <input type="file" id="excel-file-input" accept=".xlsx,.xls,.csv"
                        style="margin-bottom:10px; display:block;">
                    <button onclick="importExcelFile()" style="background:#2980b9;">๐ฅ ุงุณุชูุฑุงุฏ ุงูููุชุฌุงุช</button>
                </div>
                <div id="import-preview" class="hidden"
                    style="margin-top:15px; background:#fff; border:1px solid #ddd; padding:10px; border-radius:8px; max-height:200px; overflow-y:auto;">
                    <h4 style="margin-bottom:10px;">ูุนุงููุฉ ุงูุจูุงูุงุช:</h4>
                    <div id="import-preview-content"></div>
                </div>
                <!-- Progress Bar for Import -->
                <div id="import-progress-container" class="hidden" style="margin-top:15px;">
                    <div
                        style="background:#f0f0f0; border-radius:8px; overflow:hidden; height:24px; position:relative;">
                        <div id="import-progress-bar"
                            style="width:0%; height:100%; background:linear-gradient(90deg, #27ae60, #2ecc71); transition: width 0.3s;">
                        </div>
                        <div id="import-progress-text"
                            style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); font-size:12px; font-weight:bold; color:#333;">
                            0%</div>
                    </div>
                    <div id="import-progress-details"
                        style="font-size:11px; color:#666; margin-top:5px; text-align:center;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- BARCODE PRINT MODAL -->
    <div id="barcode-modal" class="modal hidden">
        <div class="modal-content" style="max-width:400px; text-align:center;">
            <div class="modal-header">
                <span>๐ท๏ธ ุทุจุงุนุฉ ุงูุจุงุฑููุฏ</span>
                <span class="close-modal" onclick="closeModal('barcode-modal')">&times;</span>
            </div>
            <div style="padding:15px;">
                <div id="barcode-preview"
                    style="background:#fff; padding:20px; border:2px dashed #ddd; border-radius:8px; margin-bottom:15px;">
                    <div style="font-size:14px; font-weight:bold;" id="barcode-product-name">ุงุณู ุงูููุชุฌ</div>

                    <!-- Barcode SVG -->
                    <svg id="modal-barcode-svg"
                        style="max-width:100%; height:60px; margin:10px auto; display:block;"></svg>
                    <!-- Fallback if needed or hidden value -->
                    <div style="font-family:monospace; font-size:12px; letter-spacing:1px; margin-top:5px; color:#555;"
                        id="barcode-value"></div>

                    <div style="font-size:16px; font-weight:bold; color:#27ae60; margin-top:5px;" id="barcode-price">
                        0.00</div>
                </div>
                <input type="hidden" id="barcode-product-id">
                <div style="display:flex; gap:10px; align-items:center; justify-content:center; margin-bottom:15px;">
                    <label>ุนุฏุฏ ุงูููุตูุงุช:</label>
                    <input type="number" id="barcode-copies" value="1" min="1" max="100"
                        style="width:80px; text-align:center;">
                </div>
                <button onclick="printBarcode()" style="background:#2980b9; width:100%;">๐จ๏ธ ุทุจุงุนุฉ</button>
            </div>
        </div>
    </div>
    <script src="./assets/js/jsbarcode.min.js"></script>

    <!-- PRODUCT DETAILS MODAL (Stock Movement Only) -->
    <div id="product-details-modal" class="modal hidden">
        <div class="modal-content" style="width:600px; max-width:90%;">
            <div class="modal-header">
                <span id="p-details-title">๐ฆ ุณุฌู ุญุฑูุฉ ุงููุฎุฒูู</span>
                <span class="close-modal" onclick="closeModal('product-details-modal')">&times;</span>
            </div>
            <div style="max-height:400px; overflow-y:auto;">
                <table class="simple-table">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูููุน</th>
                            <th>ุงููููุฉ</th>
                            <th>ุงูุฑุตูุฏ</th>
                            <th>ุงูุณุจุจ</th>
                            <th>ุงููุณุชุฎุฏู</th>
                        </tr>
                    </thead>
                    <tbody id="stock-history-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- STOCK ADJUSTMENT MODAL -->
    <div id="stock-adjust-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span>ุชุนุฏูู ุงููุฎุฒูู</span>
                <span class="close-modal" onclick="closeModal('stock-adjust-modal')">&times;</span>
            </div>
            <input type="hidden" id="adjust-prod-id">
            <h3 id="adjust-prod-name" style="margin-bottom:15px; text-align:center;"></h3>

            <label>ููุน ุงูุญุฑูุฉ:</label>
            <select id="adjust-type">
                <option value="adjustment">ุชุณููุฉ ุฌุฑุฏ (ุชุนุฏูู ูุจุงุดุฑ)</option>
                <option value="purchase">ุดุฑุงุก (ุฅุถุงูุฉ)</option>
                <option value="return">ูุฑุชุฌุน (ุฅุถุงูุฉ)</option>
                <option value="damage">ุชุงูู (ุฎุตู)</option>
                <option value="loss">ููุฏุงู (ุฎุตู)</option>
            </select>

            <label>ุงููููุฉ:</label>
            <input type="number" id="adjust-qty" placeholder="ุฃุฏุฎู ุงููููุฉ" min="1">

            <label>ููุงุญุธุงุช:</label>
            <input type="text" id="adjust-reason" placeholder="ุณุจุจ ุงูุชุนุฏูู">

            <button onclick="saveStockAdjustment()">ุญูุธ</button>
        </div>
    </div>

    <!-- CUSTOMER MODAL (Add/Edit) -->
    <div id="customer-modal" class="modal hidden">
        <div class="modal-content" style="max-width:450px;">
            <div class="modal-header">
                <span id="customer-modal-title">ุฅุถุงูุฉ ุนููู</span>
                <span class="close-modal" onclick="closeModal('customer-modal')">&times;</span>
            </div>
            <input type="hidden" id="cust-id">

            <label>ุงูุงุณู: *</label>
            <input type="text" id="cust-name" placeholder="ุงุณู ุงูุนููู" required>

            <label>ุงููุงุชู:</label>
            <input type="text" id="cust-phone" placeholder="ุฑูู ุงููุงุชู">

            <label>ููุงุญุธุงุช:</label>
            <input type="text" id="cust-notes" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ">

            <div style="border-top:1px solid #eee; margin:15px 0; padding-top:15px;">
                <h4 style="margin-bottom:10px;">ุฅุนุฏุงุฏุงุช ุงูุงุฆุชูุงู</h4>

                <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                    <input type="checkbox" id="cust-allow-credit" style="width:auto;">
                    <label for="cust-allow-credit" style="margin:0;">ุงูุณูุงุญ ุจุงูุจูุน ุจุงูุขุฌู</label>
                </div>

                <label>ุญุฏ ุงูุงุฆุชูุงู:</label>
                <input type="number" id="cust-credit-limit" placeholder="0.00" min="0" step="0.01">
            </div>

            <button onclick="saveCustomer()" style="background:var(--success-color);">ุญูุธ ุงูุนููู</button>
        </div>
    </div>

    <!-- CUSTOMER DETAILS MODAL -->
    <div id="customer-details-modal" class="modal hidden">
        <div class="modal-content" style="max-width:700px;">
            <div class="modal-header">
                <span>๐ ุชูุงุตูู ุงูุนููู</span>
                <span class="close-modal" onclick="closeModal('customer-details-modal')">&times;</span>
            </div>

            <div
                style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:15px; margin-bottom:20px; text-align:center;">
                <div style="background:#f8f9fa; padding:15px; border-radius:8px;">
                    <div style="font-size:12px; color:#777;">ุญุฏ ุงูุงุฆุชูุงู</div>
                    <div id="cd-credit-limit" style="font-size:20px; font-weight:bold; color:var(--primary-color);">0.00
                    </div>
                </div>
                <div style="background:#fff5f5; padding:15px; border-radius:8px;">
                    <div style="font-size:12px; color:#777;">ุงูุฑุตูุฏ ุงููุณุชุญู</div>
                    <div id="cd-balance" style="font-size:20px; font-weight:bold; color:#e74c3c;">0.00</div>
                </div>
                <div style="background:#f0fff0; padding:15px; border-radius:8px;">
                    <div style="font-size:12px; color:#777;">ุงูุฑุตูุฏ ุงููุชุงุญ</div>
                    <div id="cd-available" style="font-size:20px; font-weight:bold; color:var(--success-color);">0.00
                    </div>
                </div>
            </div>

            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <h4>ููุงุชูุฑ ุงูุนููู</h4>
                <div style="display:flex; gap:5px;">
                    <button onclick="openPaymentModal()" style="background:#3498db; padding:5px 15px;">๐ฐ ุชุณุฌูู
                        ุฏูุนุฉ</button>
                    <button onclick="recalculateCustomerBalance()" style="background:#95a5a6; padding:5px 15px;">๐
                        ุฅุนุงุฏุฉ ุญุณุงุจ</button>
                </div>
            </div>

            <input type="hidden" id="cd-customer-id">

            <div style="max-height:300px; overflow-y:auto;">
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูุฅุฌูุงูู</th>
                            <th>ุงููุฏููุน</th>
                            <th>ุงููุชุจูู</th>
                            <th>ุงูุญุงูุฉ</th>
                            <th>ุฅุฌุฑุงุก</th>
                        </tr>
                    </thead>
                    <tbody id="cd-invoices-body">
                        <!-- Dynamic -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- PAYMENT MODAL -->
    <div id="payment-modal" class="modal hidden" style="z-index:1500;">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <span>๐ฐ ุชุณุฌูู ุฏูุนุฉ</span>
                <span class="close-modal" onclick="closeModal('payment-modal')">&times;</span>
            </div>
            <input type="hidden" id="pay-customer-id">
            <input type="hidden" id="pay-invoice-id">

            <div style="background:#f8f9fa; padding:15px; border-radius:8px; margin-bottom:15px; text-align:center;">
                <div style="font-size:12px; color:#777;">ุงูุฑุตูุฏ ุงููุณุชุญู ุงูุญุงูู</div>
                <div id="pay-current-balance" style="font-size:24px; font-weight:bold; color:#e74c3c;">0.00</div>
            </div>

            <label>ูุจูุบ ุงูุฏูุนุฉ: *</label>
            <input type="number" id="pay-amount" placeholder="0.00" min="0.01" step="0.01" required>

            <label>ููุงุญุธุงุช:</label>
            <input type="text" id="pay-notes" placeholder="ููุงุญุธุงุช ุงูุฏูุนุฉ">

            <button onclick="recordPayment()" style="background:#27ae60; margin-top:10px;">ุชุฃููุฏ ุงูุฏูุนุฉ</button>
        </div>
    </div>

    <!-- SPLIT PAYMENT MODAL -->
    <div id="split-payment-modal" class="modal hidden">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <span>๐ณ ุชูุณูู ุงูุฏูุน</span>
                <span class="close-modal" onclick="closeModal('split-payment-modal')">&times;</span>
            </div>

            <div style="background:#f8f9fa; padding:15px; border-radius:8px; margin-bottom:15px; text-align:center;">
                <div style="font-size:12px; color:#777;">ุฅุฌูุงูู ุงููุงุชูุฑุฉ</div>
                <div id="split-total" style="font-size:24px; font-weight:bold; color:var(--primary-color);">0.00</div>
            </div>

            <label>ุงููุจูุบ ููุฏุงู:</label>
            <input type="number" id="split-cash-amount" placeholder="0.00" min="0" step="0.01"
                onchange="updateSplitRemaining()">

            <label>ุงููุจูุบ ุจุงูุจุทุงูุฉ:</label>
            <input type="number" id="split-card-amount" placeholder="0.00" min="0" step="0.01"
                onchange="updateSplitRemaining()">

            <div style="background:#fff5f5; padding:10px; border-radius:8px; margin:10px 0; text-align:center;">
                <div style="font-size:12px; color:#777;">ุงููุชุจูู</div>
                <div id="split-remaining" style="font-size:18px; font-weight:bold; color:#e74c3c;">0.00</div>
            </div>

            <button onclick="confirmSplitPayment()" style="background:#27ae60; margin-top:10px;">ุชุฃููุฏ ุงูุฏูุน</button>
        </div>
    </div>

    <!-- RETURNS MODAL -->
    <div id="return-modal" class="modal hidden">
        <div class="modal-content" style="max-width:550px; max-height:85vh; overflow-y:auto;">
            <div class="modal-header">
                <span>โฉ๏ธ ุฅุฑุฌุงุน ููุชุฌุงุช</span>
                <span class="close-modal" onclick="closeModal('return-modal')">&times;</span>
            </div>

            <!-- Invoice Search Section -->
            <div
                style="background:#f8f9fa; padding:8px; border-radius:6px; margin-bottom:8px; border:1px solid #e9ecef;">
                <h4 style="margin:0 0 6px 0; font-size:12px; color:#495057;">๐ ุงูุจุญุซ ุจูุงุชูุฑุฉ</h4>
                <div style="display:flex; gap:8px;">
                    <input type="text" id="return-invoice-id" placeholder="ุฑูู ุงููุงุชูุฑุฉ..."
                        style="flex:1; padding:5px 8px; font-size:12px;">
                    <button onclick="searchReturnInvoice()"
                        style="width:auto; padding:5px 12px; background:#3498db; font-size:12px;">ุจุญุซ</button>
                </div>
            </div>

            <!-- Items Container (from invoice or manual) -->
            <div id="return-items-container"
                style="border:1px solid #ddd; border-radius:6px; padding:6px; margin-bottom:8px; max-height:200px; overflow-y:auto; min-height:40px;">
                <p style="color:#999; text-align:center; font-size:11px;">ุงุจุญุซ ุจุงููุงุชูุฑุฉ ุฃุนูุงู ุฃู ุฃุถู ููุชุฌุงุช ูุฏููุงู</p>
            </div>

            <!-- Manual Add Section -->
            <details style="margin-bottom:10px;">
                <summary
                    style="cursor:pointer; color:#8e44ad; font-weight:bold; font-size:12px; padding:6px; background:#f5f0ff; border-radius:5px;">
                    โ ุฅุถุงูุฉ ููุชุฌ ูุฏููุงู
                </summary>
                <div
                    style="padding:10px; background:#fafafa; border-radius:0 0 5px 5px; border:1px solid #eee; border-top:none;">
                    <div style="display:flex; gap:8px; margin-bottom:8px;">
                        <div style="flex:1;">
                            <label style="font-size:11px;">ุงูููุชุฌ:</label>
                            <input type="text" id="return-product-search" placeholder="ุจุงุฑููุฏ ุฃู ุงุณู..."
                                style="padding:5px 8px;">
                        </div>
                        <div style="width:70px;">
                            <label style="font-size:11px;">ุงููููุฉ:</label>
                            <input type="number" id="return-qty" value="1" min="1" style="padding:5px 8px;">
                        </div>
                    </div>
                    <button onclick="addReturnItem()" style="background:#8e44ad; width:100%; padding:6px;">+ ุฅุถุงูุฉ
                        ูููุฑุชุฌุน</button>
                </div>
            </details>

            <!-- Return Total -->
            <div
                style="background:#fff5f5; padding:10px; border-radius:6px; margin-bottom:10px; border:1px solid #f5c6cb;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <span style="font-weight:bold; font-size:14px;">๐ฐ ุฅุฌูุงูู ุงููุฑุชุฌุน:</span>
                    <span id="return-total" style="font-size:18px; font-weight:bold; color:#e74c3c;">0.00</span>
                </div>
            </div>

            <!-- Return Reason -->
            <div style="margin-bottom:10px;">
                <label style="font-size:13px;">ุณุจุจ ุงูุฅุฑุฌุงุน:</label>
                <select id="return-reason-select"
                    onchange="if(this.value) document.getElementById('return-reason').value = this.value;"
                    style="margin-bottom:5px; padding:6px;">
                    <option value="">-- ุงุฎุชุฑ ุณุจุจ --</option>
                    <option value="ููุชุฌ ุชุงูู">ููุชุฌ ุชุงูู</option>
                    <option value="ุฎุทุฃ ูู ุงูุทูุจ">ุฎุทุฃ ูู ุงูุทูุจ</option>
                    <option value="ุนุฏู ุฑุถุง ุงูุนููู">ุนุฏู ุฑุถุง ุงูุนููู</option>
                    <option value="ููุชุฌ ููุชูู ุงูุตูุงุญูุฉ">ููุชุฌ ููุชูู ุงูุตูุงุญูุฉ</option>
                    <option value="ุณุจุจ ุขุฎุฑ">ุณุจุจ ุขุฎุฑ</option>
                </select>
                <input type="text" id="return-reason" placeholder="ุฃู ุงูุชุจ ุณุจุจูุง ูุฎุตุตูุง..." style="padding:6px 10px;">
            </div>

            <button onclick="processReturn()" style="background:#e74c3c; width:100%; padding:10px;">โ ุชุฃููุฏ
                ุงูุฅุฑุฌุงุน</button>
        </div>
    </div>

    <!-- HELD CARTS MODAL -->
    <div id="held-carts-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span>ุงูููุงุชูุฑ ุงููุนููุฉ</span>
                <span class="close-modal" onclick="closeModal('held-carts-modal')">&times;</span>
            </div>
            <div id="held-carts-list" style="max-height:300px; overflow-y:auto;"></div>
        </div>
    </div>

    <!-- INVOICE DETAILS MODAL -->
    <div id="invoice-details-modal" class="modal hidden">
        <div class="modal-content" style="width:400px;">
            <div class="modal-header">
                <span>ุชูุงุตูู ุงููุงุชูุฑุฉ</span>
                <span class="close-modal" onclick="closeModal('invoice-details-modal')">&times;</span>
            </div>
            <div id="invoice-preview-content"
                style="padding:10px; background:#f9f9f9; border:1px solid #ddd; max-height:500px; overflow-y:auto;">
                <!-- Dynamic Invoice Content -->
            </div>
            <div style="margin-top:15px; text-align:center;">
                <button onclick="reprintInvoice()" style="background:#34495e; color:white;">ุทุจุงุนุฉ</button>
            </div>
        </div>
    </div>

    <!-- ALERTS -->
    <div id="custom-alert" class="modal hidden" style="z-index: 2000;">
        <div class="alert-modal-content">
            <h3 style="margin-bottom:10px;">ุชูุจูู</h3>
            <p id="custom-alert-msg" class="alert-msg"></p>
            <button onclick="closeCustomAlert()" style="width:100px;">ููุงูู</button>
        </div>
    </div>

    <div id="custom-confirm" class="modal hidden" style="z-index: 2000;">
        <div class="alert-modal-content">
            <h3 style="margin-bottom:10px;">ุชุฃููุฏ</h3>
            <p id="custom-confirm-msg" class="alert-msg"></p>
            <div class="alert-btn-row">
                <button id="confirm-yes-btn" class="btn-confirm">ูุนู</button>
                <button onclick="closeCustomConfirm(false)" class="btn-cancel">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- SYSTEM RESET MODAL -->
    <div id="reset-modal" class="modal hidden" style="z-index: 2100;">
        <div class="modal-content" style="max-width:380px; text-align:center; padding:0;">
            <div class="modal-header" style="background:transparent; border-bottom:none;">
                <span>โ๏ธ ุฅุนุงุฏุฉ ุถุจุท ุงููุตูุน</span>
                <span class="close-modal" onclick="closeModal('reset-modal')">&times;</span>
            </div>
            <div style="padding:15px 20px 20px;">
                <div style="font-size:40px; margin-bottom:10px;">๐๏ธ</div>
                <h4 style="color:#e74c3c; margin-bottom:10px;">ุชุญุฐูุฑ ุฎุทูุฑ!</h4>
                <p style="color:#555; margin-bottom:12px; line-height:1.5; font-size:13px;">
                    ุณูุชู ุญุฐู <strong>ุฌููุน ุงูุจูุงูุงุช</strong> ุจูุง ูู ุฐูู:
                </p>
                <ul
                    style="text-align:right; background:#fff5f5; padding:10px 20px; border-radius:6px; margin-bottom:12px; list-style:none; font-size:12px;">
                    <li style="padding:3px 0;">โ ุงูููุชุฌุงุช ูุงููุฆุงุช</li>
                    <li style="padding:3px 0;">โ ุงูููุงุชูุฑ ูุงููุจูุนุงุช</li>
                    <li style="padding:3px 0;">โ ุงูุนููุงุก ูุงูุฅุนุฏุงุฏุงุช</li>
                    <li style="padding:3px 0;">โ ุจูุงูุงุช ุงูุชุฑุฎูุต</li>
                </ul>
                <p style="color:#777; font-size:12px; margin-bottom:12px;">
                    ุงูุชุจ <strong style="color:#e74c3c;">RESET</strong> ููุชุฃููุฏ:
                </p>
                <input type="text" id="reset-confirm-input" placeholder="RESET"
                    style="text-align:center; font-weight:bold; letter-spacing:3px; padding:8px;">
                <div style="display:flex; gap:10px; margin-top:12px;">
                    <button onclick="closeModal('reset-modal')"
                        style="flex:1; background:#95a5a6; padding:10px;">ุฅูุบุงุก</button>
                    <button onclick="confirmSystemReset()"
                        style="flex:1; background:#e74c3c; padding:10px;">ุชุฃููุฏ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- HOLD CART NAME MODAL -->
    <div id="hold-name-modal" class="modal hidden" style="z-index: 2000;">
        <div class="modal-content" style="max-width:350px;">
            <div class="modal-header">
                <span>ุชุนููู ุงููุงุชูุฑุฉ</span>
                <span class="close-modal" onclick="closeModal('hold-name-modal')">&times;</span>
            </div>
            <div style="padding:10px 0;">
                <label>ุงุณู ุงููุงุชูุฑุฉ ุงููุนููุฉ:</label>
                <input type="text" id="hold-cart-name-input" placeholder="ูุซุงู: ุฒุจูู ุฃุญูุฏ">
                <button onclick="confirmHoldCart()" style="margin-top:10px;">ุชุนููู ุงููุงุชูุฑุฉ</button>
            </div>
        </div>
    </div>

    <!-- BARCODE PRINT MODAL -->
    <div id="barcode-print-modal" class="modal hidden" style="z-index: 2000;">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <span>๐ท๏ธ ุทุจุงุนุฉ ุจุงุฑููุฏ</span>
                <span class="close-modal" onclick="closeModal('barcode-print-modal')">&times;</span>
            </div>
            <div style="padding:15px 0;">
                <input type="hidden" id="bc-print-product-id">
                <input type="hidden" id="bc-print-barcode">

                <div
                    style="text-align:center; margin-bottom:15px; padding:15px; background:#f8f9fa; border-radius:8px;">
                    <div style="font-size:18px; font-weight:bold; margin-bottom:10px;" id="bc-print-product-name">-
                    </div>
                    <svg id="bc-print-barcode-svg" style="max-width:100%; height:60px;"></svg>
                    <div style="font-family:monospace; font-size:10px; color:#555; margin-top:5px; text-align:center;"
                        id="bc-print-barcode-display">-
                    </div>
                    <div style="font-size:18px; color:var(--success-color); margin-top:8px; font-weight:bold;"
                        id="bc-print-price-display">-</div>
                </div>

                <div style="margin-bottom:15px;">
                    <label>ุนุฏุฏ ุงููุณุฎ:</label>
                    <input type="number" id="bc-print-copies" value="1" min="1" max="99"
                        style="width:100px; text-align:center; font-size:16px;">
                </div>

                <button onclick="executeBarcodePrint()" style="width:100%; background:var(--success-color);">
                    ๐จ๏ธ ุทุจุงุนุฉ ุงูุจุงุฑููุฏ
                </button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>

</html>